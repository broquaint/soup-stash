<h1>Recent games <%= render 'shared/period_filter' %></h1>

<div class='games-listing'>
  <%= render 'shared/selections' %>
  <table class='table table-striped table-condensed'>
    <thead>
      <tr>
        <th>Score</th>
        <th>Player</th>
        <th><%= render partial: 'shared/column_filter',
                locals: { column: 'Race', filterables: DCSS::RACE.values, param: 'race' }
                %>
        </th>
        <th><%= render partial: 'shared/column_filter',
                locals: { column: 'Background', filterables: DCSS::BACKGROUND.values, param: 'background' }
                %>
        </th>
        <th><%= render partial: 'shared/column_filter',
                locals: { column: 'God', filterables: DCSS::GODS, param: 'god' }
                %>
        </th>
        <th><abbr title="Experience Level">XL</abbr></th>
        <th>Killer</TH>
      </tr>
    </thead>
    <tbody>
      <% for game in @games %>
      <tr>
        <td><%= link_to game.score, game_path(game) %>
          <% if game.won %><i class="icon-star" title="Won!"></i><% end %></td>
        <td><%= player_link(game) %> the <%= game.title %></td>
        <td><%= game.race %></td>
        <td><%= game.background %></td>
        <td><%= game.god || '-' %></td>
        <td><%= game.xl %></td>
        <td><%= game.killer || ( game.won ? 'WON!' : game.ending ) %></td>
      </tr>
      <% end %>
    </tbody>
  </table>

  <%= paginate @games %>
</div>
